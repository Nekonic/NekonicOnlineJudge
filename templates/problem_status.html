{% extends "base.html" %}
{% block title %}{{ problem_status.title }} - 채점 현황 - Nekonic OJ{% endblock title %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
  <h1>{{ problem_status.title }} - 채점 현황</h1>
  <a href="/problems/{{ problem_status.id }}" class="btn btn-outline-primary">문제로 돌아가기</a>
</div>

<div class="card">
  <div class="card-header">
    <h5 class="mb-0">최근 제출 ({{ problem_status.submissions | length }}건)</h5>
  </div>
  <div class="card-body p-0">
    {% if problem_status.submissions %}
    <div class="table-responsive">
      <table class="table table-hover mb-0">
        <thead class="table-light">
        <tr>
          <th>제출 번호</th>
          <th>사용자</th>
          <th>언어</th>
          <th>결과</th>
          <th>점수</th>
          <th>실행 시간</th>
          <th>메모리</th>
          <th>제출 시간</th>
        </tr>
        </thead>
        <tbody>
        {% for submission in problem_status.submissions %}
        <tr style="cursor: pointer;" onclick="window.location.href='/submissions/{{ submission.id }}'">
          <td><a href="/submissions/{{ submission.id }}" class="text-decoration-none">#{{ submission.id }}</a></td>
          <td>{{ submission.username }}</td>
          <td>{{ submission.language }}</td>
          <td>
                            <span class="badge
                                {% if submission.status == 'ACCEPTED' %}bg-success
                                {% elif submission.status == 'WRONG_ANSWER' %}bg-danger
                                {% elif submission.status == 'TIME_LIMIT_EXCEEDED' %}bg-warning text-dark
                                {% elif submission.status == 'MEMORY_LIMIT_EXCEEDED' %}bg-warning text-dark
                                {% elif submission.status == 'RUNTIME_ERROR' %}bg-danger
                                {% elif submission.status == 'COMPILATION_ERROR' %}bg-dark
                                {% elif submission.status == 'PENDING' %}bg-secondary
                                {% elif submission.status == 'JUDGING' %}bg-info
                                {% else %}bg-secondary
                                {% endif %}">
                                {% if submission.status == 'ACCEPTED' %}정답
                                {% elif submission.status == 'WRONG_ANSWER' %}오답
                                {% elif submission.status == 'TIME_LIMIT_EXCEEDED' %}시간 초과
                                {% elif submission.status == 'MEMORY_LIMIT_EXCEEDED' %}메모리 초과
                                {% elif submission.status == 'RUNTIME_ERROR' %}런타임 에러
                                {% elif submission.status == 'COMPILATION_ERROR' %}컴파일 에러
                                {% elif submission.status == 'PENDING' %}대기 중
                                {% elif submission.status == 'JUDGING' %}채점 중
                                {% else %}{{ submission.status }}
                                {% endif %}
                            </span>
          </td>
          <td>
            {% if submission.score %}{{ submission.score }}/100
            {% elif submission.status == 'ACCEPTED' %}100/100
            {% else %}-{% endif %}
          </td>
          <td>{% if submission.execution_time %}{{ submission.execution_time }}ms{% else %}-{% endif %}</td>
          <td>{% if submission.memory_usage %}{{ submission.memory_usage }}KB{% else %}-{% endif %}</td>
          <td class="text-muted">{{ submission.submitted_at }}</td>
        </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
    <div class="text-center py-4 text-muted">
      <i class="fas fa-inbox fa-3x mb-3"></i>
      <p>아직 제출된 솔루션이 없습니다.</p>
    </div>
    {% endif %}
  </div>
</div>

{% endblock content %}
